{% extends 'layout.html' %}

{% block content %}
  {% if current_user.is_authenticated %}
      <form id="favorate" action="" method="post">
      {% if is_fan%}
        <input class="btn btn-secondary float-right btn-sm mt-2" type="submit" name="follow_action" value="Unfollow this user" >
      {% else %}
        <input class="btn btn-primary float-right btn-sm mt-2" type="submit" name="follow_action" value="Follow this user" >
      {% endif %}
    </form>
    {% endif %}


  <h4>Main page of user {{user['name'] }}</h4>

  

  <ul>
    <li>Yealping Since: <span class="badge badge-pill badge-primary">{{user['yealping_since'] }}</span></li>
  </ul>


  
  <p></p>
  {% for collection in collections %}
    <a href="{{url_for('user_collection', user_id = user['user_id'], collection_id = collection['collection_id'])}}">
        <h4>{{ collection['collection_name'] }}</h4>
    </a>
  {% endfor %}

  

  {% for review in reviews %}
    <article class="media content-section">
      <img class="rounded-circle article-img" src="{{ url_for('static', filename='profile_pics/default.jpg') }}">
      <div class="media-body">
        <div class="article-metadata">
          <a class="mr-1" href="{{ url_for('user_main', user_id=review['user_id']) }}">{{ review['username'] }}</a>
          
          <span class="badge badge-primary">Stars: {{review['stars']}}</span>
          

          <small class="text-muted">{{ review['review_date'].strftime('%Y-%m-%d') }}</small>
        </div>  
        <p class="article-content">{{ review['detailed_review'] }}</p>
        <button type="button" class="btn btn-primary btn-sm">
          useful <span class="badge badge-light">{{review['useful']}}</span>
          <span class="sr-only">unread messages</span>
        </button>
        <button type="button" class="btn btn-info btn-sm">
          funny <span class="badge badge-light">{{review['funny']}}</span>
          <span class="sr-only">unread messages</span>
        </button>
        <button type="button" class="btn btn-success btn-sm">
          cool <span class="badge badge-light">{{review['cool']}}</span>
          <span class="sr-only">unread messages</span>
        </button>
      </div>
      
    </article>
  {% endfor %}

{% endblock %}